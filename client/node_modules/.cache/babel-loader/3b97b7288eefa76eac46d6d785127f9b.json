{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\bekke\\\\Documents\\\\Art Website\\\\client\\\\src\\\\Settings\\\\subscriptions_list.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport SubscriptionChange from './subscription_change';\nimport { createBrowserHistory } from 'history';\n\nclass SubscriptionsList extends Component {\n  constructor(props) {\n    super(props);\n    this.handleUpdateFrequency = this.handleUpdateFrequency.bind(this);\n    this.updateValue = this.updateValue.bind(this);\n    this.editDiet = this.editDiet.bind(this);\n    this.editFragrance = this.editFragrance.bind(this);\n    this.state = {\n      baking: false,\n      candlemaking: false,\n      fragrance: this.props.fragrance,\n      diet: this.props.diet,\n      change: false,\n      frequency: this.props.frequency,\n      value: '',\n      next_billing_date: '',\n      successful_cancel: this.props.successful_cancel\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.category == 'Baking') {\n      this.setState({\n        baking: true\n      });\n    }\n\n    if (this.props.category == 'Candlemaking') {\n      this.setState({\n        candlemaking: true\n      });\n    }\n  } // Edit Diet Restrictions ---------- \n\n\n  editDiet(e) {\n    const history = createBrowserHistory();\n    const dietValues = document.getElementById('dietRestrictionValues');\n    let saveButton = document.createElement('p');\n    saveButton.setAttribute('class', 'edit-diet');\n    saveButton.innerHTML = \"Save\";\n    e.target.replaceWith(saveButton);\n    const editButton = e.target;\n    let dietInput = document.createElement('input');\n    dietInput.type = \"text\";\n    dietInput.className = \"edit-diet-input\";\n    dietInput.value = this.state.value;\n    document.querySelector('.dietary-restrictions-settings').appendChild(dietInput);\n    dietValues.replaceWith(dietInput);\n    dietInput.addEventListener('change', e => {\n      this.setState({\n        diet: e.target.value\n      });\n    }); // Save Changes \n\n    saveButton.addEventListener('click', e => {\n      e.target.replaceWith(editButton);\n\n      if (this.state.diet == null) {\n        dietInput.replaceWith(this.props.diet);\n      } else {\n        dietInput.replaceWith(dietValues);\n      } // Send Changes to database\n\n\n      const user_ID = localStorage.getItem('user_ID');\n      axios.post('/update-diet-restrictions', {\n        user_ID,\n        diet: this.state.diet\n      }).catch(err => {\n        if (err.response.status == 404) {\n          history.push('/error404/not_found');\n          window.location.reload();\n        } else if (err.response.status == 500) {\n          history.push('/error500/internal_server_error');\n          window.location.reload();\n        } else {\n          history.push('/error');\n          window.location.reload();\n        }\n      });\n    });\n  } // Edit Fragrance Allergies ---------- \n\n\n  editFragrance(e) {\n    const history = createBrowserHistory();\n    const fragranceValues = document.getElementById('fragranceAllergyValues');\n    let saveButton = document.createElement('p');\n    saveButton.setAttribute('class', 'edit-fragrance');\n    saveButton.innerHTML = \"Save\";\n    e.target.replaceWith(saveButton);\n    const editButton = e.target;\n    let fragranceInput = document.createElement('input');\n    fragranceInput.type = \"text\";\n    fragranceInput.className = \"edit-fragrance-input\";\n    fragranceInput.value = this.state.value;\n    document.querySelector('.fragrance-allergies-settings').appendChild(fragranceInput);\n    fragranceValues.replaceWith(fragranceInput);\n    fragranceInput.addEventListener('change', e => {\n      this.setState({\n        fragrance: e.target.value\n      });\n    }); // Save Changes \n\n    saveButton.addEventListener('click', e => {\n      if (this.state.fragrance == null) {\n        fragranceInput.replaceWith(this.props.fragrance);\n      } else {\n        fragranceInput.replaceWith(fragranceValues);\n      }\n\n      e.target.replaceWith(editButton); // Send Changes to database\n\n      const user_ID = localStorage.getItem('user_ID');\n      axios.post('/update-fragrance-allergies', {\n        user_ID,\n        fragrance: this.state.fragrance\n      }).catch(err => {\n        if (err.response.status == 404) {\n          history.push('/error404/not_found');\n          window.location.reload();\n        } else if (err.response.status == 500) {\n          history.push('/error500/internal_server_error');\n          window.location.reload();\n        } else {\n          history.push('/error');\n          window.location.reload();\n        }\n      });\n    });\n  }\n\n  updateValue(value) {\n    this.setState({\n      value\n    });\n  }\n\n  handleUpdateFrequency(e) {\n    this.setState({\n      change: true,\n      frequency: ''\n    });\n    let saveButton = document.createElement('p');\n    saveButton.setAttribute('class', 'sub-save');\n    saveButton.innerHTML = \"Save\";\n    e.target.replaceWith(saveButton);\n    const changeButton = e.target;\n    saveButton.addEventListener('click', e => {\n      if (this.state.value == '') {\n        this.setState({\n          change: false,\n          frequency: this.props.frequency\n        });\n      } else {\n        this.setState({\n          change: false,\n          frequency: this.state.value\n        });\n      }\n\n      e.target.replaceWith(changeButton); // Update Subscription Frequency -------------\n\n      const user_ID = localStorage.getItem('user_ID');\n      const successfulMessage = document.querySelector('.successful-update');\n      axios.post('/update-subscription', {\n        user_ID,\n        frequency: this.state.frequency,\n        category: this.props.category,\n        price: this.props.price,\n        count: this.props.count\n      }).then(response => {\n        this.setState({\n          next_billing_date: response.data.next_billing_date\n        });\n\n        if (response.data.next_billing_date) {\n          successfulMessage.style.display = \"block\";\n        }\n      });\n    });\n  }\n\n  render() {\n    const diet_list = this.state.diet.split(',').join(' ');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"successful-update\",\n        children: [\"Subscription updated successfully! Next payment is on \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: this.state.next_billing_date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 104\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subscription-settings-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subscription-label d-flex flex-row\",\n          children: [\"Selection: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subscription-value category-value\",\n            style: {\n              marginLeft: 200 + 'px'\n            },\n            children: this.props.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 82\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subscription-label d-flex flex-row\",\n          children: [\"Frequency:  \", this.state.change ? /*#__PURE__*/_jsxDEV(SubscriptionChange, {\n            value: this.updateValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 104\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subscription-value frequency-value\",\n            style: {\n              marginLeft: 180 + 'px'\n            },\n            children: this.state.frequency\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 159\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sub-change\",\n            onClick: this.handleUpdateFrequency,\n            children: \"Change\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 273\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subscription-label d-flex flex-row\",\n          children: [\"Price: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subscription-value\",\n            children: [\"$\", this.props.price, \".00 \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 16 + 'px'\n              },\n              children: \"USD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 138\n            }, this), \" / month\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 78\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), this.state.baking ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dietary-restrictions-settings\",\n          children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"subscription-label\",\n              children: [\"Diet Restrictions:\", /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"diet-values-container d-flex flex-row justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"subscription-value\",\n                  id: \"dietRestrictionValues\",\n                  children: diet_list\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"edit-diet\",\n              onClick: this.editDiet,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }, this) : null, this.state.candlemaking ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fragrance-allergies-settings\",\n          children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"subscription-label\",\n              children: [\"Fragrance Allergies:\", /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fragrance-values-container d-flex flex-row justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"subscription-value\",\n                  id: \"fragranceAllergyValues\",\n                  children: this.state.fragrance\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"edit-fragrance\",\n              onClick: this.editFragrance,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default SubscriptionsList;","map":{"version":3,"sources":["C:/Users/bekke/Documents/Art Website/client/src/Settings/subscriptions_list.js"],"names":["React","Component","axios","SubscriptionChange","createBrowserHistory","SubscriptionsList","constructor","props","handleUpdateFrequency","bind","updateValue","editDiet","editFragrance","state","baking","candlemaking","fragrance","diet","change","frequency","value","next_billing_date","successful_cancel","componentDidMount","category","setState","e","history","dietValues","document","getElementById","saveButton","createElement","setAttribute","innerHTML","target","replaceWith","editButton","dietInput","type","className","querySelector","appendChild","addEventListener","user_ID","localStorage","getItem","post","catch","err","response","status","push","window","location","reload","fragranceValues","fragranceInput","changeButton","successfulMessage","price","count","then","data","style","display","render","diet_list","split","join","marginLeft","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport SubscriptionChange from './subscription_change';\r\nimport {createBrowserHistory} from 'history';\r\n\r\n\r\nclass SubscriptionsList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleUpdateFrequency = this.handleUpdateFrequency.bind(this);\r\n        this.updateValue = this.updateValue.bind(this);\r\n        this.editDiet = this.editDiet.bind(this);\r\n        this.editFragrance = this.editFragrance.bind(this);\r\n        this.state = {\r\n            baking: false,\r\n            candlemaking: false,\r\n            fragrance: this.props.fragrance,\r\n            diet: this.props.diet,\r\n            change: false,\r\n            frequency: this.props.frequency,\r\n            value: '',\r\n            next_billing_date: '',\r\n            successful_cancel: this.props.successful_cancel\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.category == 'Baking') {\r\n            this.setState({baking: true});\r\n        }\r\n        if(this.props.category == 'Candlemaking') {\r\n            this.setState({candlemaking: true});\r\n        }\r\n    }\r\n\r\n    // Edit Diet Restrictions ---------- \r\n    editDiet(e) {\r\n        const history = createBrowserHistory();\r\n        const dietValues = document.getElementById('dietRestrictionValues');\r\n\r\n        let saveButton = document.createElement('p');\r\n        saveButton.setAttribute('class', 'edit-diet');\r\n        saveButton.innerHTML = \"Save\";\r\n        e.target.replaceWith(saveButton);\r\n\r\n        const editButton = e.target;\r\n\r\n        let dietInput  = document.createElement('input');\r\n        dietInput.type = \"text\";\r\n        dietInput.className = \"edit-diet-input\";\r\n        dietInput.value = this.state.value;\r\n        document.querySelector('.dietary-restrictions-settings').appendChild(dietInput);\r\n\r\n        dietValues.replaceWith(dietInput);\r\n\r\n            dietInput.addEventListener('change', (e) => {\r\n                this.setState({diet: e.target.value});\r\n            })\r\n\r\n\r\n        // Save Changes \r\n        saveButton.addEventListener('click', (e) => {  \r\n            e.target.replaceWith(editButton);\r\n            \r\n            if(this.state.diet == null) {\r\n                dietInput.replaceWith(this.props.diet);\r\n            }else {\r\n                dietInput.replaceWith(dietValues);    \r\n            }    \r\n\r\n            // Send Changes to database\r\n            const user_ID = localStorage.getItem('user_ID');\r\n            axios.post('/update-diet-restrictions', {\r\n                user_ID,\r\n                diet: this.state.diet\r\n            }).catch((err) => {\r\n                if(err.response.status == 404) {\r\n                    history.push('/error404/not_found');\r\n                    window.location.reload();\r\n                }else if(err.response.status == 500) {\r\n                    history.push('/error500/internal_server_error');\r\n                    window.location.reload();\r\n                }else {\r\n                    history.push('/error');\r\n                    window.location.reload();\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    // Edit Fragrance Allergies ---------- \r\n    editFragrance(e) {\r\n        const history = createBrowserHistory();\r\n        const fragranceValues = document.getElementById('fragranceAllergyValues');\r\n       \r\n        let saveButton = document.createElement('p');\r\n        saveButton.setAttribute('class', 'edit-fragrance');\r\n        saveButton.innerHTML = \"Save\";\r\n        e.target.replaceWith(saveButton);\r\n\r\n        const editButton = e.target;\r\n\r\n        let fragranceInput = document.createElement('input');\r\n        fragranceInput.type = \"text\";\r\n        fragranceInput.className = \"edit-fragrance-input\";\r\n        fragranceInput.value = this.state.value;\r\n        document.querySelector('.fragrance-allergies-settings').appendChild(fragranceInput);\r\n\r\n        fragranceValues.replaceWith(fragranceInput);\r\n\r\n            fragranceInput.addEventListener('change', (e) => {\r\n                this.setState({fragrance: e.target.value});\r\n            })\r\n\r\n        // Save Changes \r\n        saveButton.addEventListener('click', (e) => { \r\n\r\n            if(this.state.fragrance == null) {\r\n                fragranceInput.replaceWith(this.props.fragrance);\r\n            }else {\r\n                fragranceInput.replaceWith(fragranceValues);    \r\n            }   \r\n\r\n            e.target.replaceWith(editButton);\r\n        \r\n            // Send Changes to database\r\n            const user_ID = localStorage.getItem('user_ID');\r\n            axios.post('/update-fragrance-allergies', {\r\n                user_ID,\r\n                fragrance: this.state.fragrance\r\n            }).catch((err) => {\r\n                if(err.response.status == 404) {\r\n                    history.push('/error404/not_found');\r\n                    window.location.reload();\r\n                }else if(err.response.status == 500) {\r\n                    history.push('/error500/internal_server_error');\r\n                    window.location.reload();\r\n                }else {\r\n                    history.push('/error');\r\n                    window.location.reload();\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    updateValue(value) {\r\n        this.setState({value});\r\n    }\r\n\r\n    handleUpdateFrequency(e) {\r\n        this.setState({\r\n            change: true,\r\n            frequency: ''\r\n        });\r\n   \r\n        let saveButton = document.createElement('p');\r\n        saveButton.setAttribute('class', 'sub-save');\r\n        saveButton.innerHTML = \"Save\";\r\n        e.target.replaceWith(saveButton);\r\n\r\n        const changeButton = e.target;\r\n\r\n        saveButton.addEventListener('click', (e) => {\r\n            if(this.state.value == '') {\r\n                this.setState({\r\n                    change: false,\r\n                    frequency: this.props.frequency\r\n                });\r\n            }else {\r\n                this.setState({\r\n                    change: false,\r\n                    frequency: this.state.value\r\n                });\r\n            }\r\n          \r\n            e.target.replaceWith(changeButton);\r\n\r\n            // Update Subscription Frequency -------------\r\n            const user_ID = localStorage.getItem('user_ID');\r\n            const successfulMessage = document.querySelector('.successful-update');\r\n            axios.post('/update-subscription', {\r\n                user_ID,\r\n                frequency: this.state.frequency,\r\n                category: this.props.category,\r\n                price: this.props.price,\r\n                count: this.props.count\r\n            }).then((response) => {\r\n                this.setState({next_billing_date: response.data.next_billing_date});\r\n\r\n                if(response.data.next_billing_date) {\r\n                    successfulMessage.style.display = \"block\";\r\n                }\r\n            })\r\n        });\r\n        \r\n    } \r\n\r\n    render() {\r\n        const diet_list = this.state.diet.split(',').join(' ');\r\n        return (\r\n            <div>\r\n                <p className=\"successful-update\">Subscription updated successfully! Next payment is on <strong>{this.state.next_billing_date}</strong></p>\r\n                <div className=\"subscription-settings-container\">\r\n                    <p className=\"subscription-label d-flex flex-row\">Selection: <span className=\"subscription-value category-value\" style={{marginLeft:200 + 'px'}}>{this.props.category}</span></p>\r\n                    <hr />\r\n                    <p className=\"subscription-label d-flex flex-row\">Frequency:  {this.state.change ? <SubscriptionChange value={this.updateValue} /> : null}<span className=\"subscription-value frequency-value\" style={{marginLeft:180 + 'px'}}>{this.state.frequency}</span><span className=\"sub-change\" onClick={this.handleUpdateFrequency}>Change</span></p>\r\n                    <hr />\r\n                    <p className=\"subscription-label d-flex flex-row\">Price: <span className=\"subscription-value\">${this.props.price}.00 <span style={{fontSize: 16 + 'px'}}>USD</span> / month</span></p>\r\n                    {this.state.baking ? (\r\n                        <div className=\"dietary-restrictions-settings\">\r\n                            <hr />\r\n                            <div className=\"d-flex flex-row\">\r\n                                <p className=\"subscription-label\">Diet Restrictions:\r\n                                    <div className=\"diet-values-container d-flex flex-row justify-content-center\">\r\n                                        <span className=\"subscription-value\" id=\"dietRestrictionValues\">{diet_list}</span>\r\n                                    </div>\r\n                                </p>\r\n                                <p className=\"edit-diet\" onClick={this.editDiet}>Edit</p>\r\n                            </div>\r\n                        </div>\r\n                    ): null}\r\n                    {this.state.candlemaking ? (\r\n                        <div className=\"fragrance-allergies-settings\">\r\n                            <hr />\r\n                            <div className=\"d-flex flex-row\">\r\n                                <p className=\"subscription-label\">Fragrance Allergies:\r\n                                    <div className=\"fragrance-values-container d-flex flex-row justify-content-center\">\r\n                                        <span className=\"subscription-value\" id=\"fragranceAllergyValues\">{this.state.fragrance}</span>\r\n                                    </div>\r\n                                </p>\r\n                                <p className=\"edit-fragrance\" onClick={this.editFragrance}>Edit</p>\r\n                            </div>\r\n                        </div>\r\n                    ): null}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SubscriptionsList;"]},"metadata":{},"sourceType":"module"}