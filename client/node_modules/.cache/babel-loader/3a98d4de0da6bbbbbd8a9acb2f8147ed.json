{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\bekke\\\\Documents\\\\Art Website\\\\client\\\\src\\\\Settings\\\\change_password_settings.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { createBrowserHistory } from 'history';\nexport default class ChangePasswordSettings extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.cancelChangePassword = this.cancelChangePassword.bind(this);\n    this.state = {\n      password: '',\n      password_error: '',\n      password_updated: false\n    };\n  } // Cancel change password -------\n\n\n  cancelChangePassword() {\n    this.setState({\n      change_password_clicked: false\n    });\n    this.props.change_password_clicked(this.state.change_password_clicked);\n  } // Submit new password --------\n\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const history = createBrowserHistory();\n    const user_ID = localStorage.getItem('user_ID');\n    const input = document.querySelector('input');\n    axios.post('http://localhost:5000/account-settings-password-change', {\n      user_ID,\n      password: this.state.password\n    }).then(response => {\n      if (response.data.password) {\n        input.classList.add('missing-field');\n        this.setState({\n          password_error: response.data.password.msg\n        });\n      } else {\n        this.setState({\n          password_updated: true\n        });\n        this.props.password_updated(this.state.password_updated);\n      }\n    }).catch(err => {\n      if (err.response.status == 404) {\n        history.push('/error404/not_found');\n        window.location.reload();\n      } else if (err.response.status == 500) {\n        history.push('/error500/internal_server_error');\n        window.location.reload();\n      } else {\n        history.push('/error');\n        window.location.reload();\n      }\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      password: e.target.value\n    });\n    e.target.classList.remove('missing-field');\n    this.setState({\n      password_error: ''\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-row new-password-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"new-password-label\",\n            htmlFor: \"password\",\n            children: \"New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"edit-password-input\",\n            onChange: this.handleChange,\n            type: \"password\",\n            name: \"password\",\n            value: this.state.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"empty-field\",\n          style: {\n            marginLeft: 180 + 'px'\n          },\n          children: this.state.password_error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"change-password-buttons-container d-flex flex-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"save-new-password\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-password-change-button\",\n            onClick: this.cancelChangePassword,\n            type: \"button\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/bekke/Documents/Art Website/client/src/Settings/change_password_settings.js"],"names":["React","Component","axios","createBrowserHistory","ChangePasswordSettings","constructor","props","handleSubmit","bind","handleChange","cancelChangePassword","state","password","password_error","password_updated","setState","change_password_clicked","e","preventDefault","history","user_ID","localStorage","getItem","input","document","querySelector","post","then","response","data","classList","add","msg","catch","err","status","push","window","location","reload","target","value","remove","render","marginLeft"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,oBAAR,QAAmC,SAAnC;AAGA,eAAe,MAAMC,sBAAN,SAAqCH,SAArC,CAA+C;AAC1DI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BF,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKG,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,cAAc,EAAE,EAFP;AAGTC,MAAAA,gBAAgB,EAAE;AAHT,KAAb;AAKH,GAXyD,CAa1D;;;AACAJ,EAAAA,oBAAoB,GAAG;AACnB,SAAKK,QAAL,CAAc;AAACC,MAAAA,uBAAuB,EAAE;AAA1B,KAAd;AACA,SAAKV,KAAL,CAAWU,uBAAX,CAAmC,KAAKL,KAAL,CAAWK,uBAA9C;AACH,GAjByD,CAmB1D;;;AACAT,EAAAA,YAAY,CAACU,CAAD,EAAI;AACZA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,OAAO,GAAGhB,oBAAoB,EAApC;AACA,UAAMiB,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAhB;AACA,UAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AAEAvB,IAAAA,KAAK,CAACwB,IAAN,CAAW,wDAAX,EAAqE;AACjEN,MAAAA,OADiE;AAEjER,MAAAA,QAAQ,EAAC,KAAKD,KAAL,CAAWC;AAF6C,KAArE,EAGGe,IAHH,CAGSC,QAAD,IAAc;AAClB,UAAGA,QAAQ,CAACC,IAAT,CAAcjB,QAAjB,EAA2B;AACvBW,QAAAA,KAAK,CAACO,SAAN,CAAgBC,GAAhB,CAAoB,eAApB;AACA,aAAKhB,QAAL,CAAc;AAACF,UAAAA,cAAc,EAAEe,QAAQ,CAACC,IAAT,CAAcjB,QAAd,CAAuBoB;AAAxC,SAAd;AACH,OAHD,MAGM;AACF,aAAKjB,QAAL,CAAc;AAACD,UAAAA,gBAAgB,EAAE;AAAnB,SAAd;AACA,aAAKR,KAAL,CAAWQ,gBAAX,CAA4B,KAAKH,KAAL,CAAWG,gBAAvC;AACH;AACJ,KAXD,EAWGmB,KAXH,CAWUC,GAAD,IAAS;AACd,UAAGA,GAAG,CAACN,QAAJ,CAAaO,MAAb,IAAuB,GAA1B,EAA+B;AAC3BhB,QAAAA,OAAO,CAACiB,IAAR,CAAa,qBAAb;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,OAHD,MAGM,IAAGL,GAAG,CAACN,QAAJ,CAAaO,MAAb,IAAuB,GAA1B,EAA+B;AACjChB,QAAAA,OAAO,CAACiB,IAAR,CAAa,iCAAb;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,OAHK,MAGA;AACFpB,QAAAA,OAAO,CAACiB,IAAR,CAAa,QAAb;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH;AACJ,KAtBD;AAuBH;;AAED9B,EAAAA,YAAY,CAACQ,CAAD,EAAI;AACZ,SAAKF,QAAL,CAAc;AAAEH,MAAAA,QAAQ,EAAEK,CAAC,CAACuB,MAAF,CAASC;AAArB,KAAd;AACAxB,IAAAA,CAAC,CAACuB,MAAF,CAASV,SAAT,CAAmBY,MAAnB,CAA0B,eAA1B;AACA,SAAK3B,QAAL,CAAc;AAACF,MAAAA,cAAc,EAAE;AAAjB,KAAd;AACH;;AAED8B,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,6BACI;AAAM,QAAA,QAAQ,EAAE,KAAKpC,YAArB;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,wCAAf;AAAA,kCACI;AAAO,YAAA,SAAS,EAAC,oBAAjB;AAAsC,YAAA,OAAO,EAAC,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAO,YAAA,SAAS,EAAC,qBAAjB;AAAuC,YAAA,QAAQ,EAAE,KAAKE,YAAtD;AAAoE,YAAA,IAAI,EAAC,UAAzE;AAAoF,YAAA,IAAI,EAAC,UAAzF;AAAoG,YAAA,KAAK,EAAE,KAAKE,KAAL,CAAWC;AAAtH;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI;AAAG,UAAA,SAAS,EAAC,aAAb;AAA2B,UAAA,KAAK,EAAE;AAACgC,YAAAA,UAAU,EAAE,MAAM;AAAnB,WAAlC;AAAA,oBAA6D,KAAKjC,KAAL,CAAWE;AAAxE;AAAA;AAAA;AAAA;AAAA,gBALJ,eAMI;AAAK,UAAA,SAAS,EAAC,mDAAf;AAAA,kCACI;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,SAAS,EAAC,mBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,YAAA,SAAS,EAAC,+BAAlB;AAAkD,YAAA,OAAO,EAAE,KAAKH,oBAAhE;AAAsF,YAAA,IAAI,EAAC,QAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAeH;;AAzEyD","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport {createBrowserHistory} from 'history';\r\n\r\n\r\nexport default class ChangePasswordSettings extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.cancelChangePassword = this.cancelChangePassword.bind(this);\r\n        this.state = {\r\n            password: '',\r\n            password_error: '',\r\n            password_updated: false\r\n        }\r\n    }\r\n\r\n    // Cancel change password -------\r\n    cancelChangePassword() {\r\n        this.setState({change_password_clicked: false});\r\n        this.props.change_password_clicked(this.state.change_password_clicked);\r\n    }\r\n\r\n    // Submit new password --------\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const history = createBrowserHistory();\r\n        const user_ID = localStorage.getItem('user_ID');\r\n        const input = document.querySelector('input');\r\n\r\n        axios.post('http://localhost:5000/account-settings-password-change', {\r\n            user_ID,\r\n            password:this.state.password\r\n        }).then((response) => {\r\n            if(response.data.password) {\r\n                input.classList.add('missing-field');\r\n                this.setState({password_error: response.data.password.msg})\r\n            }else {\r\n                this.setState({password_updated: true});\r\n                this.props.password_updated(this.state.password_updated);\r\n            }\r\n        }).catch((err) => {\r\n            if(err.response.status == 404) {\r\n                history.push('/error404/not_found');\r\n                window.location.reload();\r\n            }else if(err.response.status == 500) {\r\n                history.push('/error500/internal_server_error');\r\n                window.location.reload();\r\n            }else {\r\n                history.push('/error');\r\n                window.location.reload();\r\n            }\r\n        })\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({ password: e.target.value });\r\n        e.target.classList.remove('missing-field');\r\n        this.setState({password_error: ''});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <div className=\"d-flex flex-row new-password-container\">\r\n                        <label className=\"new-password-label\" htmlFor=\"password\">New Password</label>\r\n                        <input className=\"edit-password-input\" onChange={this.handleChange} type=\"password\" name=\"password\" value={this.state.password} />\r\n                    </div>\r\n                    <p className=\"empty-field\" style={{marginLeft: 180 + 'px'}}>{this.state.password_error}</p>\r\n                    <div className=\"change-password-buttons-container d-flex flex-row\">\r\n                        <button type=\"submit\" className=\"save-new-password\">Save</button>\r\n                        <button className=\"cancel-password-change-button\" onClick={this.cancelChangePassword} type=\"button\">Cancel</button>\r\n                    </div>\r\n                </form>\r\n           </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}