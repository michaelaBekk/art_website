{"ast":null,"code":"'use strict';\n\nvar jstransformer = require('jstransformer');\n\nvar resolve = require('resolve');\n\nmodule.exports = filter;\n\nfunction getMinifyTransformerName(outputFormat) {\n  switch (outputFormat) {\n    case 'js':\n      return 'uglify-js';\n\n    case 'css':\n      return 'clean-css';\n  }\n}\n\nfunction filter(name, str, options, currentDirectory, funcName) {\n  funcName = funcName || 'render';\n  var trPath;\n\n  try {\n    try {\n      trPath = resolve.sync('jstransformer-' + name, {\n        basedir: currentDirectory || process.cwd()\n      });\n    } catch (ex) {\n      trPath = require.resolve('jstransformer-' + name);\n    }\n  } catch (ex) {\n    var err = new Error('unknown filter \":' + name + '\"');\n    err.code = 'UNKNOWN_FILTER';\n    throw err;\n  }\n\n  var tr = jstransformer(require(trPath)); // TODO: we may want to add a way for people to separately specify \"locals\"\n\n  var result = tr[funcName](str, options, options).body;\n\n  if (options && options.minify) {\n    var minifyTranformer = getMinifyTransformerName(tr.outputFormat);\n\n    if (minifyTranformer) {\n      try {\n        result = filter(minifyTranformer, result, null, currentDirectory);\n      } catch (ex) {// better to fail to minify than output nothing\n      }\n    }\n  }\n\n  return result;\n}","map":{"version":3,"sources":["C:/Users/bekke/Documents/Art Website/node_modules/pug-filters/lib/run-filter.js"],"names":["jstransformer","require","resolve","module","exports","filter","getMinifyTransformerName","outputFormat","name","str","options","currentDirectory","funcName","trPath","sync","basedir","process","cwd","ex","err","Error","code","tr","result","body","minify","minifyTranformer"],"mappings":"AAAA;;AAEA,IAAIA,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AAEAE,MAAM,CAACC,OAAP,GAAiBC,MAAjB;;AAEA,SAASC,wBAAT,CAAkCC,YAAlC,EAAgD;AAC9C,UAAQA,YAAR;AACE,SAAK,IAAL;AACE,aAAO,WAAP;;AACF,SAAK,KAAL;AACE,aAAO,WAAP;AAJJ;AAMD;;AAED,SAASF,MAAT,CAAgBG,IAAhB,EAAsBC,GAAtB,EAA2BC,OAA3B,EAAoCC,gBAApC,EAAsDC,QAAtD,EAAgE;AAC9DA,EAAAA,QAAQ,GAAGA,QAAQ,IAAI,QAAvB;AACA,MAAIC,MAAJ;;AACA,MAAI;AACF,QAAI;AACFA,MAAAA,MAAM,GAAGX,OAAO,CAACY,IAAR,CAAa,mBAAmBN,IAAhC,EAAsC;AAC7CO,QAAAA,OAAO,EAAEJ,gBAAgB,IAAIK,OAAO,CAACC,GAAR;AADgB,OAAtC,CAAT;AAGD,KAJD,CAIE,OAAOC,EAAP,EAAW;AACXL,MAAAA,MAAM,GAAGZ,OAAO,CAACC,OAAR,CAAgB,mBAAmBM,IAAnC,CAAT;AACD;AACF,GARD,CAQE,OAAOU,EAAP,EAAW;AACX,QAAIC,GAAG,GAAG,IAAIC,KAAJ,CAAU,sBAAsBZ,IAAtB,GAA6B,GAAvC,CAAV;AACAW,IAAAA,GAAG,CAACE,IAAJ,GAAW,gBAAX;AACA,UAAMF,GAAN;AACD;;AACD,MAAIG,EAAE,GAAGtB,aAAa,CAACC,OAAO,CAACY,MAAD,CAAR,CAAtB,CAhB8D,CAiB9D;;AACA,MAAIU,MAAM,GAAGD,EAAE,CAACV,QAAD,CAAF,CAAaH,GAAb,EAAkBC,OAAlB,EAA2BA,OAA3B,EAAoCc,IAAjD;;AACA,MAAId,OAAO,IAAIA,OAAO,CAACe,MAAvB,EAA+B;AAC7B,QAAIC,gBAAgB,GAAGpB,wBAAwB,CAACgB,EAAE,CAACf,YAAJ,CAA/C;;AACA,QAAImB,gBAAJ,EAAsB;AACpB,UAAI;AACFH,QAAAA,MAAM,GAAGlB,MAAM,CAACqB,gBAAD,EAAmBH,MAAnB,EAA2B,IAA3B,EAAiCZ,gBAAjC,CAAf;AACD,OAFD,CAEE,OAAOO,EAAP,EAAW,CACX;AACD;AACF;AACF;;AACD,SAAOK,MAAP;AACD","sourcesContent":["'use strict';\n\nvar jstransformer = require('jstransformer');\nvar resolve = require('resolve');\n\nmodule.exports = filter;\n\nfunction getMinifyTransformerName(outputFormat) {\n  switch (outputFormat) {\n    case 'js':\n      return 'uglify-js';\n    case 'css':\n      return 'clean-css';\n  }\n}\n\nfunction filter(name, str, options, currentDirectory, funcName) {\n  funcName = funcName || 'render';\n  var trPath;\n  try {\n    try {\n      trPath = resolve.sync('jstransformer-' + name, {\n        basedir: currentDirectory || process.cwd(),\n      });\n    } catch (ex) {\n      trPath = require.resolve('jstransformer-' + name);\n    }\n  } catch (ex) {\n    var err = new Error('unknown filter \":' + name + '\"');\n    err.code = 'UNKNOWN_FILTER';\n    throw err;\n  }\n  var tr = jstransformer(require(trPath));\n  // TODO: we may want to add a way for people to separately specify \"locals\"\n  var result = tr[funcName](str, options, options).body;\n  if (options && options.minify) {\n    var minifyTranformer = getMinifyTransformerName(tr.outputFormat);\n    if (minifyTranformer) {\n      try {\n        result = filter(minifyTranformer, result, null, currentDirectory);\n      } catch (ex) {\n        // better to fail to minify than output nothing\n      }\n    }\n  }\n  return result;\n}\n"]},"metadata":{},"sourceType":"script"}